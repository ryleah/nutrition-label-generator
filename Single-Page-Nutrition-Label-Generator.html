<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Nutrition Label</title>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,800" rel="stylesheet">
  <link href="./styles.css" rel="stylesheet">
  <script src="scripts.js" defer></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.js"></script>
  <style>
  * {
	box-sizing: border-box;
}
html {
	font-size: 16px;
}
body {
	font-family: 'Open Sans', sans-serif;
}
.flex-container {
	display: flex;
	align-items: flex-start;
	justify-content: center;
}
.flex-container > div {
	margin: 1.5em;
}
.nutLabel {
	border: 2px solid black;
	width: 270px;
	min-width: 270px;
	margin: 20px auto;
	padding: 0 7px;
	background-color: white;
}
header h1 {
	text-align: center;
	margin: -4px 0;
	letter-spacing: 0.15px
}
p {
	margin: 0;
	display: flex;
	justify-content: space-between;
}
.divider {
	border-bottom: 1px solid #888989;
	margin: 2px 0;
}
.bold {
	font-weight: 800;
}
.large {
	height: 10px;
}
.large, .medium {
	background-color: black;
	border: 0;
}
.medium {
	height: 5px;
}
.small-text {
	font-size: 0.85rem;
}
.calories-info {
	display: flex;
	justify-content: space-between;
	align-items: flex-end;
}
.calories-info h2 {
	margin: 0;
}
.left-container p {
	margin: -5px -2px;
	font-size: 2em;
	font-weight: 700;
}
.calories-info span {
	margin: -7px -2px;
	font-size: 2.4em;
	font-weight: 700;
}
.right {
	justify-content: flex-end;
}
.indent {
	margin-left: 1em;
}
.double-indent {
	margin-left: 2em;
}
.daily-value p:not(.no-divider) {
	border-bottom: 1px solid #888989;
}
.note {
	font-size: 0.6rem;
	margin: 5px 0;
}
form {
	display: flex;
	flex-direction: row;
	min-width: 400px;
}
.row {
	display: flex;
	flex-direction: row;
	padding: 5px 0;
	justify-content: center;
}
.row > * {
	width: 49%;
	padding: 2px;
}
.row > label {
	text-align: right;
	margin-right: 0.2em;
}

.form-left, .form-right {
	display: flex;
	flex-direction: column;
}

.spacer {
	flex: auto;
}
  </style>
</head>

<body>
	<div class="flex-container">
	  <div class="form">
		  <form>
        <div class="form-left">
		      <div class="row"><label for="servingsPer">Servings per Container:</label><input type="text" id="servingsPer" name="servingsPer" placeholder="ex. 12"><br></div>
          <div class="row"><label for="servingSize">Serving Size:</label><input type="text" id="servingSize" name="servingSize" placeholder="ex. 2/3 cup (55g)"><br></div>
          <div class="row"><label for="servingCalories">Calories per Serving:</label><input type="text" id="servingCalories" name="servingCalories" placeholder="ex. 230"><br></div>
          <div class="row"><label for="totalFat">Total fat:</label><input type="text" id="totalFat" name="totalFat" placeholder="ex. 8g"><br></div>
          <div class="row"><label for="totalFatPercent">Total fat percent:</label></br><input type="text" id="totalFatPercent" name="totalFatPercent" placeholder="10%"><br></div>
          <div class="row"><label for="saturatedFat">Saturated Fat:</label><input type="text" id="saturatedFat" name="saturatedFat" placeholder="ex. 1g"><br></div>
          <div class="row"><label for="saturatedFatPercent">Saturated fat percent:</label></br><input type="text" id="saturatedFatPercent" name="saturatedFatPercent" placeholder="5%"><br></div>
          <div class="row"><label for="transFat">Trans fat:</label><input type="text" id="transFat" name="transFat" placeholder="ex. 0g"><br></div>
          <div class="row"><label for="cholestrol">Cholestrol:</label><input type="text" id="cholestrol" name="cholestrol" placeholder="ex. 0mg"><br></div>
          <div class="row"><label for="cholestrolPercent">Cholestrol percent:</label></br><input type="text" id="cholestrolPercent" name="cholestrolPercent" placeholder="0%"><br></div>
          <div class="row"><label for="sodium">Sodium:</label><input type="text" id="sodium" name="sodium" placeholder="ex. 160mg"><br></div>
          <div class="row"><label for="sodiumPercent">Sodium percent:</label></br><input type="text" id="sodiumPercent" name="sodiumPercent" placeholder="7%"><br></div>
          <div class="row"><label for="totalCarbs">Total Carboyhrdates:</label><input type="text" id="totalCarbs" name="totalCarbs" placeholder="ex. 37g"><br></div>
          <div class="row"><label for="totalCarbsPercent">Total Carbs percent:</label></br><input type="text" id="totalCarbsPercent" name="totalCarbsPercent" placeholder="13%"><br></div>
        </div>
        <div class="form-right">
          <div class="row"><label for="dietaryFiber">Dietary Fiber:</label><input type="text" id="dietaryFiber" name="dietaryFiber" placeholder="ex. 4g"><br></div>
          <div class="row"><label for="totalSugars">Total sugars:</label><input type="text" id="totalSugars" name="totalSugars" placeholder="ex. 12g"><br></div>
          <div class="row"><label for="addedSugars">Included added sugars:</label><input type="text" id="addedSugars" name="addedSugars" placeholder="ex. 10g"><br></div>
          <div class="row"><label for="addedSugarsPercent">Added Sugars percent:</label></br><input type="text" id="addedSugarsPercent" name="addedSugarsPercent"placeholder="20%"><br></div>
          <div class="row"><label for="protein">Protein:</label><input type="text" id="protein" name="protein" placeholder="ex. 3g"><br></div>
          <div class="row"><label for="vitaminD">Vitamin D:</label><input type="text" id="vitaminD" name="vitaminD" placeholder="ex. 2mcg"><br></div>
          <div class="row"><label for="vitaminDPercent">Vitamin D percent:</label></br><input type="text" id="vitaminDPercent" name="vitaminDPercent" placeholder="10%"><br></div>
          <div class="row"><label for="calcium">Calcium:</label><input type="text" id="calcium" name="calcium" placeholder="ex. 260mg"><br></div>
          <div class="row"><label for="calciumPercent">Calcium percent:</label></br><input type="text" id="calciumPercent" name="calciumPercent" placeholder="20%"><br></div>
          <div class="row"><label for="iron">Iron:</label><input type="text" id="iron" name="iron" placeholder="ex. 8mg"><br></div>
          <div class="row"><label for="ironPercent">Iron percent:</label></br><input type="text" id="ironPercent" name="ironPercent" placeholder="45%"><br></div>
          <div class="row"><label for="potassium">Potassium:</label><input type="text" id="potassium" name="potassium" placeholder="ex. 235mg"><br></div>
          <div class="row"><label for="potassiumPercent">Potassium percent:</label></br><input type="text" id="potassiumPercent" name="potassiumPercent" placeholder="6%"><br></div>
        </div>      
		  </form>
      <div class="row"><input type="button" id="submit" value="Submit"></div>  
	  </div>
	  <div>
    <div class="nutLabel">
      <header>
        <h1 class="bold">Nutrition Facts</h1>
        <div class="divider"></div>
        <p><span><span id="servingsPerText">12</span> servings per container<span></p>
        <p class="bold">Serving size <span><span id="servingSizeText">2/3 cup (55g)</span></span></p>
      </header>
      <div class="divider large"></div>
      <div class="calories-info">
        <div class="left-container">
          <h2 class="bold small-text">Amount per serving</h2>
          <p>Calories</p>
        </div>
        <span id="servingCaloriesText">230</span>
      </div>
      <div class="divider medium"></div>
      <div class="daily-value small-text">
        <p class="bold right no-divider">% Daily Value *</p>
        <div class="divider"></div>
        <p><span><span class="bold">Total Fat</span> <span id="totalFatText">8g</span></span> <span class="bold"><span id="totalFatPercentText">10%</span></span></p>
        <p class="indent no-divider"><span>Saturated Fat <span id="saturatedFatText">1g</span></span> <span class="bold"><span id="saturatedFatPercentText">5%</span></span></p>
        <div class="divider"></div>
        <p class="indent no-divider"><span><i>Trans</i> Fat <span id="transFatText">0g</span></span></p>
        <div class="divider"></div>
        <p><span><span class="bold">Cholesterol</span> <span id="cholestrolText">0mg</span></span> <span class="bold"><span id="cholestrolPercentText">0%</span></span></p>
        <p><span><span class="bold">Sodium</span> <span id="sodiumText">160mg</span></span> <span class="bold"><span id="sodiumPercentText">7%</span></span></p>
        <p><span><span class="bold">Total Carbohydrate</span> <span id="totalCarbsText">37g</span></span> <span class="bold"><span id="totalCarbsPercentText">13%</span></span></p>
        <p class="indent no-divider"><span>Dietary Fiber <span id="dietaryFiberText">4g</span></span></p>
        <div class="divider"></div>
        <p class="indent no-divider"><span>Total Sugars <span id="totalSugarsText">12g</span></span></p>
        <div class="divider double-indent"></div>
        <p class="double-indent no-divider"><span>Includes <span id="addedSugarsText">10g</span> Added Sugars</span> <span class="bold"><span id="addedSugarsPercentText">20%</span></span></p>
        <div class="divider"></div>
        <p class="no-divider"><span><span class="bold">Protein</span> <span id="proteinText">3g</span></span></p>
        <div class="divider large"></div>
        <p><span>Vitamin D <span id="vitaminDText">2mcg</span></span> <span><span id="vitaminDPercentText">10%<span></span></p>
        <p><span>Calcium <span id="calciumText">260mg</span></span> <span><span id="calciumPercentText">20%</span></span></p>
        <p><span>Iron <span id="ironText">8mg</span></span> <span><span id="ironPercentText">45%</span></span></p>
        <p class="no-divider"><span>Potassium <span id="potassiumText">235mg</span></span> <span><span id="potassiumPercentText">6%</span></span></p>
      </div>
      <div class="divider medium"></div>
      <p class="note">* The % Daily Value (DV) tells you how much a nutrient in a serving of food contributes to a daily
      diet. 2,000 calories a day is used for general nutrition advice.</p>
    </div>
	<input download="download.png" id="btn-Preview-Image" type="button" value="Download" />
	</div>
    <div class="spacer"></div>
  </div>
     <script>
	 
// Grab user inserted data (values) from forms
let servingsPer = document.querySelector('#servingsPer');
let servingSize = document.querySelector('#servingSize');
let servingCalories = document.querySelector('#servingCalories');
let totalFat = document.querySelector('#totalFat');
let saturatedFat = document.querySelector('#saturatedFat');
let transFat = document.querySelector('#transFat');
let cholestrol = document.querySelector('#cholestrol');
let sodium = document.querySelector('#sodium');
let totalCarbs = document.querySelector('#totalCarbs');
let dietaryFiber = document.querySelector('#dietaryFiber');
let totalSugars = document.querySelector('#totalSugars');
let addedSugars = document.querySelector('#addedSugars');
let protein = document.querySelector('#protein');
let vitaminD = document.querySelector('#vitaminD');
let calcium = document.querySelector('#calcium');
let iron = document.querySelector('#iron');
let potassium = document.querySelector('#potassium');

// Grab user inserted data (percentages) from forms
let totalFatPercent = document.querySelector('#totalFatPercent');
let saturatedFatPercent = document.querySelector('#saturatedFatPercent');
let cholestrolPercent = document.querySelector('#cholestrolPercent');
let sodiumPercent = document.querySelector('#sodiumPercent');
let totalCarbsPercent = document.querySelector('#totalCarbsPercent');
let addedSugarsPercent = document.querySelector('#addedSugarsPercent');
let vitaminDPercent = document.querySelector('#vitaminDPercent');
let calciumPercent = document.querySelector('#calciumPercent');
let ironPercent = document.querySelector('#ironPercent');
let potassiumPercent = document.querySelector('#potassiumPercent');

// Submit button
const buttonSubmit = document.querySelector('#submit');

// Grabbing fields from nutritional label
let servingsPerText = document.querySelector('#servingsPerText');
let servingSizeText = document.querySelector('#servingSizeText');
let servingCaloriesText = document.querySelector('#servingCaloriesText');
let totalFatText = document.querySelector('#totalFatText');
let saturatedFatText = document.querySelector('#saturatedFatText');
let transFatText = document.querySelector('#transFatText');
let cholestrolText = document.querySelector('#cholestrolText');
let sodiumText = document.querySelector('#sodiumText');
let totalCarbsText = document.querySelector('#totalCarbsText');
let dietaryFiberText = document.querySelector('#dietaryFiberText');
let totalSugarsText = document.querySelector('#totalSugarsText');
let addedSugarsText = document.querySelector('#addedSugarsText');
let proteinText = document.querySelector('#proteinText');
let vitaminDText = document.querySelector('#vitaminDText');
let calciumText = document.querySelector('#calciumText');
let ironText = document.querySelector('#ironText');
let potassiumText = document.querySelector('#potassiumText');

let totalFatPercentText = document.querySelector('#totalFatPercentText');
let saturatedFatPercentText = document.querySelector('#saturatedFatPercentText');
let cholestrolPercentText = document.querySelector('#cholestrolPercentText');
let sodiumPercentText = document.querySelector('#sodiumPercentText');
let totalCarbsPercentText = document.querySelector('#totalCarbsPercentText');
let addedSugarsPercentText = document.querySelector('#addedSugarsPercentText');
let vitaminDPercentText = document.querySelector('#vitaminDPercentText');
let calciumPercentText = document.querySelector('#calciumPercentText');
let ironPercentText = document.querySelector('#ironPercentText');
let potassiumPercentText = document.querySelector('#potassiumPercentText');

// Update the nutritional label with click
buttonSubmit.onclick = updateLabel;

// Set the text on the nutritional label from inserted data
function updateLabel() {
    servingsPerText.textContent = servingsPer.value;
    servingSizeText.textContent = servingSize.value;
    servingCaloriesText.textContent = servingCalories.value;
    totalFatText.textContent = totalFat.value;
    saturatedFatText.textContent = saturatedFat.value;
    transFatText.textContent = transFat.value;
    cholestrolText.textContent = cholestrol.value;
    sodiumText.textContent = sodium.value;
    totalCarbsText.textContent = totalCarbs.value;
    dietaryFiberText.textContent = dietaryFiber.value;
    totalSugarsText.textContent = totalSugars.value;
    addedSugarsText.textContent = addedSugars.value;
    proteinText.textContent = protein.value;
    vitaminDText.textContent = vitaminD.value;
    calciumText.textContent = calcium.value;
    ironText.textContent = iron.value;
    potassiumText.textContent = potassium.value;
    totalFatPercentText.textContent = totalFatPercent.value;
    saturatedFatPercentText.textContent = saturatedFatPercent.value;
    cholestrolPercentText.textContent = cholestrolPercent.value;
    sodiumPercentText.textContent = sodiumPercent.value;
    totalCarbsPercentText.textContent = totalCarbsPercent.value;
    addedSugarsPercentText.textContent = addedSugarsPercent.value;
    vitaminDPercentText.textContent = vitaminDPercent.value;
    calciumPercentText.textContent = calciumPercent.value;
    ironPercentText.textContent = ironPercent.value;
    potassiumPercentText.textContent = potassiumPercent.value;
}

        $(document).ready(function() {


            var element = $(".nutLabel"); // global variable
            var getCanvas; // global variable
            var newData;

            $("#btn-Preview-Image").on('click', function() {
                html2canvas(element, {
                    onrendered: function(canvas) {
                        getCanvas = canvas;
                        var imgageData = getCanvas.toDataURL("image/png");
                        var a = document.createElement("a");
                        a.href = imgageData; //Image Base64 Goes here
                        a.download = "image.png"; //File name Here
                        a.click(); //Downloaded file
                    }
                });
            });


        });
    </script>
	<footer>
	<p>Written (quickly) by Ryleah Mae. If barcode downloads blurry for any reason, please wait a few seconds, and redownload it.</p>
	</footer>
</body>
</html>
